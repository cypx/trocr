 
{% extends "layout.html" %}
{% block body %}
  {% if (session.logged_in) and (requested_id=="")  %}
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('add_entry') }}" class="add-entry">
        <dt>File (you can select multiple file):
        <dd><input type="file" name="file" multiple="" size="20"/>
        <dt>Check, if you want to personnalize title and/or add comments for each file:<input type="checkbox" name="addinfo" />
        <dt><input type=submit value=Share><input type="hidden" value="{{ requested_gallery }}" name="requested_gallery" />
        {% if (requested_gallery!="")  %}
        <dt>Uploaded file will be added to the current gallery, upload from <a href={{ url_for('show_entries') }}>homepage</a></h1> if you want to create a new gallery
        {% endif %}
    </form>
  {% endif %}
  {% if entries_number > 1 %}
    <ul id="infos_page" class=entries>
        <li><a id="id_page"><h2>Page infos</h2></a></li>
        <span class="linkoff"><a href="#infos_page" >&#x25B8; Show</a></span>
        <span class="linkon"><a href="#id_page">&#x25BE; Hide</a>
            <p>Direct link:<br/> {% for entry in entries %}<a href="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}">{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}</a></br>{% endfor %}</p>
            <p>HTML - Display image:</br>
              <textarea cols="120" rows="{{ entries_number+1 }}" class="textarea" wrap='off' />{% for entry in entries -%}
                {#- -#}<a href="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}">{#- -#}
                {%- if entry.type == "image" -%}
                  {#- -#}<img src='{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}' alt='{{ entry.title }}' />{#- -#}
                {%- else  -%}
                  {#- -#}Download file {{ entry.title }}{#- -#}
                {%- endif -%}
                {#- -#}</a>{%print "\r"%}{#- -#}
              {%- endfor %}</textarea></p>
            <p>HTML - Display 600px thumb with link:</br>
              <textarea cols="120" rows="{{ entries_number+1 }}" class="textarea" wrap='off' />{% for entry in entries -%}
                {#- -#}<a href="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}">{#- -#}
                {%- if entry.type == "image" -%}
                  {#- -#}<img src='{{ url_for('show_entries',_external=true) }}tb/600/{{ entry.filename }}' alt='{{ entry.title }}' />{#- -#}
                {%- else  -%}
                  {#- -#}Download file {{ entry.title }}{#- -#}
                {%- endif -%}
                {#- -#}</a>{%print "\r"%}{#- -#}
              {%- endfor %}</textarea></p>
            <p>HTML - Display 150px thumb with link:</br>
              <textarea cols="120" rows="{{ entries_number+1 }}" class="textarea" wrap='off' />{% for entry in entries -%}
                {#- -#}<a href="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}">{#- -#}
                {%- if entry.type == "image" -%}
                  {#- -#}<img src='{{ url_for('show_entries',_external=true) }}tb/150/{{ entry.filename }}' alt='{{ entry.title }}' />{#- -#}
                {%- else  -%}
                  {#- -#}Download file {{ entry.title }}{#- -#}
                {%- endif -%}
                {#- -#}</a>{%print "\r"%}{#- -#}
              {%- endfor %}</textarea></p>
            <p>BBCode - Display image:</br>
              <textarea cols="120" rows="{{ entries_number+1 }}" class="textarea" wrap='off' />{% for entry in entries -%}
                {#- -#}[url={{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}]{#- -#}
                {%- if entry.type == "image" -%}
                  {#- -#}[img]{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}[/img]{#- -#}
                {%- else  -%}
                  {#- -#}Download file {{ entry.title }}{#- -#}
                {%- endif -%}
                {#- -#}[/url]{%print "\r"%}
              {%- endfor %}</textarea></p>
            <p>BBCode - Display 600px thumbs with link:</br>
              <textarea cols="120" rows="{{ entries_number+1 }}" class="textarea" wrap='off' />{% for entry in entries -%}
                {#- -#}[url={{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}]{#- -#}
                {%- if entry.type == "image" -%}
                  {#- -#}[img]{{ url_for('show_entries',_external=true) }}tb/600/{{ entry.filename }}[/img]{#- -#}
                {%- else  -%}
                  {#- -#}Download file {{ entry.title }}{#- -#}
                {%- endif -%}
                {#- -#}[/url]{%print "\r"%}
              {%- endfor %}</textarea></p>
              <p>BBCode - Display 150px thumbs with link:</br>
              <textarea cols="120" rows="{{ entries_number+1 }}" class="textarea" wrap='off' />{% for entry in entries -%}
                {#- -#}[url={{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}]{#- -#}
                {%- if entry.type == "image" -%}
                  {#- -#}[img]{{ url_for('show_entries',_external=true) }}tb/150/{{ entry.filename }}[/img]{#- -#}
                {%- else  -%}
                  {#- -#}Download file {{ entry.title }}{#- -#}
                {%- endif -%}
                {#- -#}[/url]{%print "\r"%}
              {%- endfor %}</textarea></p>
            </span>
          </ul></li>
    </ul>
    {% endif %}
    {% for entry in entries %}
    <ul id="infos_{{ entry.id }}" class=entries>
        <li>
          <a id="id_{{ entry.id }}"><h2>{{ entry.title }}</h2></a> 
          {% if session.logged_in %}
           (<a href="{{ url_for('edit_entry',_external=true,i=entry.id)  }}">edit</a>
           or <a href="{{ url_for('edit_entry',_external=true,g=entry.gallery_id)  }}"> edit gallery</a>)
          {% endif %}
        </li>
        {% if entry.type == "image" %}
        <li><a href="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}">
              <img src="{{ url_for('show_entries',_external=true) }}tb/600/{{ entry.filename }}" alt="{{ entry.filename }}" />
            </a>
        </li>
        {% elif entry.type == "video" %}
        <li><video width="320" height="240" controls>
          <source src="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}" type="{{ entry.mime }}">
          Your browser does not support the video tag.
        </video></li>
        {% elif entry.type == "audio" %}
        <li><audio controls>
          <source src="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}" type="{{ entry.mime }}">
          Your browser does not support the audio element.
        </audio></li>
        {% else %}
        <li><a href="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}">Download</a></li>
        {% endif %}
        <li><p>{{ entry.descr|safe }}</p></li>
        <li class="linkoff"><a href="#infos_{{ entry.id }}" >&#x25B8; Show infos</a><li>
        <li class="linkon">          
          <a href="#id_{{ entry.id }}">&#x25BE; Hide infos</a>
          <ul>
            <li>URL: <a href="{{ url_for('show_entries',_external=true,i=entry.id) }}">{{ url_for('show_entries',_external=true,i=entry.id) }}</a></li>
            <li>Gallery: <a href="{{ url_for('show_entries',_external=true,g=entry.gallery_id) }}">{{ url_for('show_entries',_external=true,g=entry.gallery_id) }}</a></li>
            <li>Date: {{ entry.date }}</li>
            <li>Type: {{ entry.type }}</li>
            <li>Type: {{ entry.mime }}</li>
            <li>Size: {{ entry.size }}</li>
            <li>Direct link: <a href="{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}">{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}</a></li>
            {% if entry.type == "image" %}
            <li>HTML - Display image: <input type="text" size="50%" value="<img src='{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}' alt='{{ entry.title }}' />" /></li>
            <li>HTML - Display 600px thumb with link: <input type="text" size="50%" value="<a href='{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}''><img src='{{ url_for('show_entries',_external=true) }}tb/600/{{ entry.filename }}'alt='{{ entry.title }}' /></a>" /></li>
            <li>HTML - Display 150px thumb with link: <input type="text" size="50%" value="<a href='{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}''><img src='{{ url_for('show_entries',_external=true) }}tb/150/{{ entry.filename }}'alt='{{ entry.title }}' /></a>" /></li>
            <li>BBCode - Display image: <input type="text" size="50%" value="[img]{{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}[/img]" /></li>
            <li>BBCode - Display 600px thumbs: <input type="text" size="50%" value="[url={{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}][img]{{ url_for('show_entries',_external=true) }}tb/600/{{ entry.filename }}[/img][/url]" /></li>
            <li>BBCode - Display 150px thumbs: <input type="text" size="50%" value="[url={{ url_for('show_entries',_external=true) }}data/{{ entry.filename }}][img]{{ url_for('show_entries',_external=true) }}tb/150/{{ entry.filename }}[/img][/url]" /></li>
            {% endif %}
          </ul></li>
      </ul>
    {% else %}
    <ul class=entries>
      <li><em>Unbelievable.  No entries here so far</em>
    </ul>
    {% endfor %}
    <dt>
      {% if previouspage !=0 %}<a href="{{ url_for('show_entries',_external=true,p=previouspage,g=requested_gallery) }}">Previous page</a> {% endif -%} 
      {%- if nextpage !=0 %} <a href="{{ url_for('show_entries',_external=true,p=nextpage,g=requested_gallery) }}">Next page</a>{% endif %}
{% endblock %}